@if (account() === null) {
  <!-- ═══ Hero Section (logged out) ═══════════════════════════════════════ -->
  <div class="hero-section">
    <div class="hero-rings" aria-hidden="true"></div>
    <div class="hero-content">
      <h1 class="hero-title" jhiTranslate="home.title">Learn without limits</h1>
      <p class="hero-subtitle" jhiTranslate="home.subtitle">Start, switch, or advance your career with thousands of courses</p>
      <div class="hero-actions">
        <a class="btn btn-accent btn-lg hero-btn" (click)="login()" jhiTranslate="home.cta.signin">Sign In</a>
        <a class="btn btn-outline-light btn-lg hero-btn" routerLink="/catalog" jhiTranslate="home.cta.browse">Browse Catalog</a>
      </div>
    </div>
    <svg class="hero-wave" viewBox="0 0 1440 120" preserveAspectRatio="none">
      <path d="M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,64C960,75,1056,85,1152,80C1248,75,1344,53,1392,42.7L1440,32L1440,120L0,120Z" fill="#111827"/>
    </svg>
  </div>

  <!-- Feature Highlights -->
  <div class="features-section">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <div class="feature-card">
            <div class="feature-icon-wrapper">
              <fa-icon icon="graduation-cap" class="feature-icon"></fa-icon>
            </div>
            <h5 class="feature-title" jhiTranslate="home.features.disciplines.title">Browse Disciplines</h5>
            <p class="feature-text" jhiTranslate="home.features.disciplines.description">
              Explore a wide range of disciplines spanning multiple fields of study.
            </p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="feature-card">
            <div class="feature-icon-wrapper icon-coral">
              <fa-icon icon="sitemap" class="feature-icon"></fa-icon>
            </div>
            <h5 class="feature-title" jhiTranslate="home.features.programs.title">Structured Programs</h5>
            <p class="feature-text" jhiTranslate="home.features.programs.description">
              Follow structured learning programs designed to take you from beginner to expert.
            </p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="feature-card">
            <div class="feature-icon-wrapper icon-success">
              <fa-icon icon="chart-line" class="feature-icon"></fa-icon>
            </div>
            <h5 class="feature-title" jhiTranslate="home.features.progress.title">Track Progress</h5>
            <p class="feature-text" jhiTranslate="home.features.progress.description">
              Monitor your learning journey with courses, lessons, and resources.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom CTA -->
  <div class="cta-section">
    <h2 class="cta-title" jhiTranslate="home.cta.bottomTitle">Ready to start learning?</h2>
    <a class="btn btn-accent btn-lg hero-btn" (click)="login()" jhiTranslate="home.cta.signin">Sign In</a>
  </div>

} @else {
  @if (account(); as accountRef) {
    <!-- ═══ Dashboard (logged in) ════════════════════════════════════════════ -->
    <div class="dashboard-section">
      <div class="container-xl">

        <!-- Welcome header -->
        <div class="welcome-header">
          <h2 class="welcome-title">
            Welcome back, <span class="welcome-name">{{ accountRef.firstName || accountRef.login }}</span>
          </h2>
          <p class="welcome-sub">Here's where you stand today.</p>
        </div>

        <!-- ─── Animated Stats Row ─────────────────────────────────────────── -->
        <div class="stats-grid">

          <!-- Overall ring -->
          <div class="stat-ring-card stat-entry" style="--entry-delay: 0ms">
            <div class="ring-wrap">
              <svg class="progress-ring" viewBox="0 0 120 120">
                <defs>
                  <linearGradient id="ring-grad" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%"   stop-color="#06b6d4" />
                    <stop offset="100%" stop-color="#8b5cf6" />
                  </linearGradient>
                </defs>
                <circle class="ring-track" cx="60" cy="60" r="54" />
                <circle class="ring-fill ring-fill-teal"
                  cx="60" cy="60" r="54"
                  [style.stroke-dasharray]="ringDash(loadingStats() ? 0 : overallPercent())"
                  [style.transition]="loadingStats() ? 'none' : 'stroke-dasharray 1.8s cubic-bezier(0.34,1.56,0.64,1)'" />
              </svg>
              <div class="ring-inner">
                <span class="ring-number">{{ displayPercent() }}<span class="ring-unit">%</span></span>
                <span class="ring-label">Overall</span>
              </div>
            </div>
            <p class="stat-ring-title">Progress</p>
          </div>

          <!-- Enrolled -->
          <div class="stat-number-card stat-entry" style="--entry-delay: 80ms">
            <div class="stat-icon-wrap stat-icon-teal">
              <fa-icon icon="book-open"></fa-icon>
            </div>
            <div class="stat-number-body">
              <span class="stat-big">{{ displayEnrolled() }}</span>
              <span class="stat-label">Enrolled</span>
            </div>
            <div class="stat-bar-bg">
              <div class="stat-bar-fill stat-bar-teal"
                [style.width]="(loadingStats() ? '0' : '100') + '%'"
                [style.transition]="loadingStats() ? 'none' : 'width 1.4s ease-out'"></div>
            </div>
          </div>

          <!-- Completed -->
          <div class="stat-number-card stat-entry" style="--entry-delay: 160ms">
            <div class="stat-icon-wrap stat-icon-gold">
              <fa-icon icon="trophy"></fa-icon>
            </div>
            <div class="stat-number-body">
              <span class="stat-big">{{ displayCompleted() }}</span>
              <span class="stat-label">Completed</span>
            </div>
            <div class="stat-bar-bg">
              @let totalEnrolled = dashCourses().length;
              <div class="stat-bar-fill stat-bar-gold"
                [style.width]="(loadingStats() || totalEnrolled === 0 ? 0 : (completedCourses().length / totalEnrolled * 100)) + '%'"
                [style.transition]="loadingStats() ? 'none' : 'width 1.4s ease-out 0.2s'"></div>
            </div>
          </div>

          <!-- Lessons done -->
          <div class="stat-number-card stat-entry" style="--entry-delay: 240ms">
            <div class="stat-icon-wrap stat-icon-violet">
              <fa-icon icon="check-circle"></fa-icon>
            </div>
            <div class="stat-number-body">
              <span class="stat-big">{{ displayLessons() }}</span>
              <span class="stat-label">Lessons Done</span>
            </div>
            <div class="stat-bar-bg">
              <div class="stat-bar-fill stat-bar-violet"
                [style.width]="(loadingStats() ? '0' : '100') + '%'"
                [style.transition]="loadingStats() ? 'none' : 'width 1.4s ease-out 0.4s'"></div>
            </div>
          </div>

        </div>

        <!-- ─── Continue Learning ──────────────────────────────────────────── -->
        @if (!loadingStats()) {
          @if (inProgressCourses().length > 0) {
            <div class="dash-section dash-section--entry" style="--entry-delay: 320ms">
              <h3 class="dash-section-title">
                <fa-icon icon="play" class="dash-section-icon teal"></fa-icon>
                Continue Learning
              </h3>
              <div class="continue-list">
                @for (dc of inProgressCourses().slice(0, 3); track dc.course.id) {
                  <a [routerLink]="['/catalog/course', dc.course.id]" class="continue-card">
                    <div class="continue-card-body">
                      <div class="continue-title">{{ dc.course.courseTitle }}</div>
                      <div class="continue-meta">
                        {{ dc.lessonsCompleted }} / {{ dc.lessonsTotal }} lessons
                      </div>
                    </div>
                    <div class="continue-progress-col">
                      <div class="continue-percent">{{ dc.progressPercent }}%</div>
                      <div class="continue-bar-bg">
                        <div class="continue-bar-fill" [style.width.%]="dc.progressPercent"></div>
                      </div>
                    </div>
                    <fa-icon icon="chevron-right" class="continue-arrow"></fa-icon>
                  </a>
                }
              </div>
            </div>
          }

          <!-- ─── Completed Courses ──────────────────────────────────────────── -->
          @if (completedCourses().length > 0) {
            <div class="dash-section dash-section--entry" style="--entry-delay: 400ms">
              <h3 class="dash-section-title">
                <fa-icon icon="trophy" class="dash-section-icon gold"></fa-icon>
                Completed
              </h3>
              <div class="completed-list">
                @for (dc of completedCourses(); track dc.course.id) {
                  <a [routerLink]="['/catalog/course', dc.course.id]" class="completed-chip">
                    <fa-icon icon="check-circle" class="chip-check"></fa-icon>
                    <span>{{ dc.course.courseTitle }}</span>
                  </a>
                }
              </div>
            </div>
          }

          <!-- ─── Quick Actions ─────────────────────────────────────────────── -->
          <div class="dash-section dash-section--entry" style="--entry-delay: 480ms">
            <h3 class="dash-section-title">
              <fa-icon icon="compass" class="dash-section-icon teal"></fa-icon>
              Quick Actions
            </h3>
            <div class="row dashboard-grid">
              <div class="col-lg-6 col-md-6 mb-4">
                <a routerLink="/catalog" class="dashboard-card card-explore">
                  <div class="card-body">
                    <fa-icon icon="compass" class="dashboard-icon"></fa-icon>
                    <h5 class="card-title">Explore Catalog</h5>
                    <p class="card-text">Discover disciplines, courses, and lessons</p>
                  </div>
                </a>
              </div>
              <div class="col-lg-6 col-md-6 mb-4">
                <a routerLink="/my-learning" class="dashboard-card card-learning">
                  <div class="card-body">
                    <fa-icon icon="book-open" class="dashboard-icon"></fa-icon>
                    <h5 class="card-title">My Learning</h5>
                    <p class="card-text">See your full progress and bookmarks</p>
                  </div>
                </a>
              </div>
            </div>
          </div>
        }

        <!-- Stats skeleton while loading -->
        @if (loadingStats()) {
          <div class="dash-section">
            <div class="skeleton-row">
              <div class="skeleton-block"></div>
              <div class="skeleton-block"></div>
              <div class="skeleton-block"></div>
            </div>
          </div>
        }

        <!-- ─── Admin Content Management ──────────────────────────────────── -->
        <div *jhiHasAnyAuthority="'ROLE_ADMIN'" class="admin-section">
          <h4 class="admin-section-title">Content Management</h4>
          <div class="row">
            <div class="col-lg-4 col-md-6 mb-3">
              <a routerLink="/discipline" class="dashboard-card dashboard-card-sm card-discipline">
                <div class="card-body">
                  <fa-icon icon="graduation-cap" class="dashboard-icon-sm"></fa-icon>
                  <h6 class="card-title">Disciplines</h6>
                </div>
              </a>
            </div>
            <div class="col-lg-4 col-md-6 mb-3">
              <a routerLink="/program" class="dashboard-card dashboard-card-sm card-program">
                <div class="card-body">
                  <fa-icon icon="sitemap" class="dashboard-icon-sm"></fa-icon>
                  <h6 class="card-title">Programs</h6>
                </div>
              </a>
            </div>
            <div class="col-lg-4 col-md-6 mb-3">
              <a routerLink="/course" class="dashboard-card dashboard-card-sm card-course">
                <div class="card-body">
                  <fa-icon icon="book" class="dashboard-icon-sm"></fa-icon>
                  <h6 class="card-title">Courses</h6>
                </div>
              </a>
            </div>
            <div class="col-lg-4 col-md-6 mb-3">
              <a routerLink="/lesson" class="dashboard-card dashboard-card-sm card-lesson">
                <div class="card-body">
                  <fa-icon icon="chalkboard-teacher" class="dashboard-icon-sm"></fa-icon>
                  <h6 class="card-title">Lessons</h6>
                </div>
              </a>
            </div>
            <div class="col-lg-4 col-md-6 mb-3">
              <a routerLink="/resource" class="dashboard-card dashboard-card-sm card-resource">
                <div class="card-body">
                  <fa-icon icon="file-alt" class="dashboard-icon-sm"></fa-icon>
                  <h6 class="card-title">Resources</h6>
                </div>
              </a>
            </div>
          </div>
        </div>

      </div>
    </div>
  }
}
